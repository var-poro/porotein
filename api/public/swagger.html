<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Porotein - Documentation</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui.css" />
  <!-- Thème Outline de Swagger UI Themes -->
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-themes@3.0.1/themes/3.x/theme-outline.css" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="stylesheet" href="/swagger-custom.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
    
    body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #f8f9fa;
    }
    
    #swagger-ui {
      max-width: 1460px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Personnalisation complète de l'interface */
    .swagger-ui .topbar {
      background-color: #3f51b5;
      padding: 15px 0;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .swagger-ui .info {
      margin: 30px 0;
      background-color: white;
      padding: 30px;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .swagger-ui .info .title {
      font-size: 32px;
      font-weight: 500;
      color: #3f51b5;
      margin-bottom: 20px;
    }
    
    .swagger-ui .info .title small.version-stamp {
      background-color: #f50057;
      font-size: 14px;
      padding: 5px 10px;
      border-radius: 20px;
      color: white;
      font-weight: 500;
      margin-left: 15px;
      vertical-align: middle;
    }
    
    .swagger-ui .info p {
      font-size: 16px;
      line-height: 1.6;
      color: #555;
    }
    
    /* Stylisation des tags */
    .swagger-ui .opblock-tag {
      font-size: 20px;
      margin: 20px 0 10px 0;
      padding: 12px 15px;
      background-color: white;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      color: #3f51b5;
      font-weight: 500;
      transition: all 0.2s ease;
      border-left: 3px solid #3f51b5;
    }
    
    .swagger-ui .opblock-tag:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
    }
    
    /* Stylisation des blocs d'opérations */
    .swagger-ui .opblock {
      margin-bottom: 10px;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      border: none;
      transition: all 0.2s ease;
    }
    
    .swagger-ui .opblock:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
    }
    
    .swagger-ui .opblock .opblock-summary {
      padding: 10px 15px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .swagger-ui .opblock .opblock-summary-method {
      border-radius: 3px;
      font-weight: 600;
      min-width: 70px;
      text-align: center;
      font-size: 13px;
      padding: 6px 0;
    }
    
    .swagger-ui .opblock-summary-description {
      font-size: 14px;
      font-weight: 400;
      color: #555;
    }
    
    /* Couleurs des méthodes HTTP */
    .swagger-ui .opblock.opblock-get {
      background-color: rgba(63, 81, 181, 0.03);
      border-color: #3f51b5;
    }
    
    .swagger-ui .opblock.opblock-get .opblock-summary-method {
      background-color: #3f51b5;
    }
    
    .swagger-ui .opblock.opblock-post {
      background-color: rgba(76, 175, 80, 0.03);
      border-color: #4caf50;
    }
    
    .swagger-ui .opblock.opblock-post .opblock-summary-method {
      background-color: #4caf50;
    }
    
    .swagger-ui .opblock.opblock-put {
      background-color: rgba(255, 152, 0, 0.03);
      border-color: #ff9800;
    }
    
    .swagger-ui .opblock.opblock-put .opblock-summary-method {
      background-color: #ff9800;
    }
    
    .swagger-ui .opblock.opblock-delete {
      background-color: rgba(244, 67, 54, 0.03);
      border-color: #f44336;
    }
    
    .swagger-ui .opblock.opblock-delete .opblock-summary-method {
      background-color: #f44336;
    }
    
    /* Stylisation des boutons */
    .swagger-ui .btn {
      border-radius: 3px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
      font-weight: 500;
      text-transform: uppercase;
      font-size: 12px;
      padding: 6px 12px;
    }
    
    .swagger-ui .btn:hover {
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }
    
    .swagger-ui .btn.execute {
      background-color: #4caf50;
      color: white;
      border-color: #4caf50;
    }
    
    .swagger-ui .btn.authorize {
      background-color: #3f51b5;
      color: white;
      border-color: #3f51b5;
    }
    
    .swagger-ui .btn.authorize svg {
      fill: white;
    }
    
    /* Stylisation des schémas */
    .swagger-ui .model-box {
      background-color: white;
      border-radius: 4px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      padding: 10px;
    }
    
    .swagger-ui .model-title {
      color: #3f51b5;
      font-weight: 500;
    }
    
    /* Stylisation des formulaires */
    .swagger-ui input[type=text], 
    .swagger-ui textarea {
      border-radius: 3px;
      border: 1px solid #ddd;
      padding: 8px 10px;
      transition: all 0.2s ease;
    }
    
    .swagger-ui input[type=text]:focus, 
    .swagger-ui textarea:focus {
      border-color: #3f51b5;
      box-shadow: 0 0 0 2px rgba(63, 81, 181, 0.15);
    }
    
    /* Stylisation des réponses */
    .swagger-ui .responses-table .response {
      border-radius: 3px;
    }
    
    .swagger-ui .response-col_status {
      font-weight: 600;
    }
    
    /* Stylisation du conteneur de schéma */
    .swagger-ui .scheme-container {
      background-color: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
    
    /* Stylisation du bouton de retour à l'application */
    .back-to-app-btn {
      color: white !important;
      margin-left: 20px;
      text-decoration: none;
      padding: 6px 12px;
      background-color: rgba(255,255,255,0.2);
      border-radius: 3px;
      transition: background-color 0.2s;
      font-weight: 500;
      text-transform: uppercase;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
    }
    
    .back-to-app-btn:before {
      content: "←";
      margin-right: 8px;
      font-size: 14px;
    }
    
    .back-to-app-btn:hover {
      background-color: rgba(255,255,255,0.3);
    }
    
    /* Stylisation du bouton de mode sombre */
    .dark-mode-toggle {
      background: none;
      border: none;
      cursor: pointer;
      margin-left: 20px;
      color: white;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s;
    }
    
    .dark-mode-toggle:hover {
      background-color: rgba(255,255,255,0.2);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .swagger-ui .opblock-body {
        padding: 10px;
      }
      
      .swagger-ui .info .title {
        font-size: 24px;
      }
      
      .swagger-ui .info {
        padding: 15px;
      }
    }
    
    /* Mode sombre */
    body.dark-mode {
      background-color: #1e1e1e;
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui {
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui .info {
      background-color: #2d2d2d;
    }
    
    body.dark-mode .swagger-ui .info .title,
    body.dark-mode .swagger-ui .info h1,
    body.dark-mode .swagger-ui .info h2,
    body.dark-mode .swagger-ui .info h3,
    body.dark-mode .swagger-ui .info h4,
    body.dark-mode .swagger-ui .info h5,
    body.dark-mode .swagger-ui .info h6 {
      color: #90caf9;
    }
    
    body.dark-mode .swagger-ui .info p {
      color: #ccc;
    }
    
    body.dark-mode .swagger-ui .opblock-tag {
      color: #90caf9;
      background-color: #2d2d2d;
      border-left: 3px solid #5c6bc0;
    }
    
    body.dark-mode .swagger-ui .opblock {
      background-color: #2d2d2d;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    body.dark-mode .swagger-ui .opblock.opblock-get {
      background-color: rgba(92, 107, 192, 0.05);
    }
    
    body.dark-mode .swagger-ui .opblock.opblock-post {
      background-color: rgba(76, 175, 80, 0.05);
    }
    
    body.dark-mode .swagger-ui .opblock.opblock-put {
      background-color: rgba(255, 152, 0, 0.05);
    }
    
    body.dark-mode .swagger-ui .opblock.opblock-delete {
      background-color: rgba(244, 67, 54, 0.05);
    }
    
    body.dark-mode .swagger-ui .opblock .opblock-summary-description {
      color: #ccc;
    }
    
    body.dark-mode .swagger-ui .opblock-body {
      background-color: #2d2d2d;
    }
    
    body.dark-mode .swagger-ui input[type=text],
    body.dark-mode .swagger-ui textarea {
      background-color: #333;
      color: #f0f0f0;
      border-color: #555;
    }
    
    body.dark-mode .swagger-ui .model-box {
      background-color: #333;
    }
    
    body.dark-mode .swagger-ui .model {
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui .model-title {
      color: #90caf9;
    }
    
    body.dark-mode .swagger-ui .parameter__name,
    body.dark-mode .swagger-ui .parameter__type {
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui table {
      background-color: #2d2d2d;
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui .response-col_status {
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui .response-col_description {
      color: #f0f0f0;
    }
    
    body.dark-mode .swagger-ui .responses-table .response {
      background-color: #333;
    }
    
    body.dark-mode .swagger-ui .scheme-container {
      background-color: #2d2d2d;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    body.dark-mode .swagger-ui select {
      background-color: #333;
      color: #f0f0f0;
      border-color: #555;
    }
  </style>
</head>
<body>
  <div id="swagger-ui"></div>

  <script src="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui-standalone-preset.js"></script>
  <script>
    window.onload = function() {
      const ui = SwaggerUIBundle({
        url: "/api-docs.json",
        dom_id: "#swagger-ui",
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIStandalonePreset
        ],
        plugins: [
          SwaggerUIBundle.plugins.DownloadUrl
        ],
        layout: "StandaloneLayout",
        docExpansion: "none",
        filter: true,
        showRequestDuration: true,
        syntaxHighlight: {
          theme: "monokai"
        }
      });

      // Personnalisation après chargement
      setTimeout(() => {
        // Remplacer le logo
        const logoImg = document.querySelector('.swagger-ui .topbar img');
        if (logoImg) {
          logoImg.src = '/favicon.png';
          logoImg.alt = 'Porotein API';
          logoImg.style.height = '40px';
        }

        // Ajouter un bouton pour revenir à l'application
        const topbar = document.querySelector('.swagger-ui .topbar');
        if (topbar) {
          const backBtn = document.createElement('a');
          backBtn.href = '/';
          backBtn.className = 'back-to-app-btn';
          backBtn.innerText = 'Retour à l\'application';
          
          topbar.appendChild(backBtn);
        }

        // Ajouter un mode sombre
        const darkModeBtn = document.createElement('button');
        darkModeBtn.className = 'dark-mode-toggle';
        darkModeBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';
        darkModeBtn.title = 'Basculer le mode sombre';
        
        // Vérifier si le mode sombre est déjà activé
        const isDarkMode = localStorage.getItem('porotein-swagger-dark-mode') === 'true';
        if (isDarkMode) {
          document.body.classList.add('dark-mode');
        }
        
        darkModeBtn.addEventListener('click', () => {
          document.body.classList.toggle('dark-mode');
          const isDark = document.body.classList.contains('dark-mode');
          localStorage.setItem('porotein-swagger-dark-mode', isDark);
          
          if (isDark) {
            darkModeBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>';
          } else {
            darkModeBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';
          }
        });
        
        if (topbar) {
          topbar.appendChild(darkModeBtn);
        }
        
        // Améliorer les titres des sections
        const tags = document.querySelectorAll('.opblock-tag');
        tags.forEach(tag => {
          const text = tag.textContent.trim();
          if (text) {
            // Ajouter une icône en fonction du tag
            let icon = '';
            if (text.includes('Auth')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>';
            } else if (text.includes('User')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>';
            } else if (text.includes('Program')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>';
            } else if (text.includes('Session')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>';
            } else if (text.includes('Exercise')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></svg>';
            } else if (text.includes('Muscle')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 5H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"></path><rect x="6" y="3" width="12" height="4" rx="1" ry="1"></rect></svg>';
            } else if (text.includes('Tag')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>';
            } else if (text.includes('Weight')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line></svg>';
            } else if (text.includes('Supplement')) {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg>';
            } else {
              icon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>';
            }
            
            tag.innerHTML = `${icon} <span style="margin-left: 10px;">${text}</span>`;
          }
        });
        
        // Améliorer l'affichage des exemples de requêtes
        const models = document.querySelectorAll('.model-box');
        models.forEach(model => {
          model.style.maxHeight = 'none';
        });
      }, 500);
    }
  </script>
</body>
</html> 